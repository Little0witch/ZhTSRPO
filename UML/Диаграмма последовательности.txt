@startuml

skinparam participantPadding 140

title Diagram of sequences

actor Player as Player
boundary Игра as Игра
entity Танк as Танк
participant Обьект as Обьект
entity Враг as Враг
entity Снаряд as Снаряд

Player ++

Player -> Игра ++: Кнопка "Начать"
Игра -> Обьект ++: Создание обьектов
Игра -> Танк ++: Создание танка
Игра -> Враг ++: Создание вражеских танков

loop Управление танком
    alt Перемещение танка кнопками вперед или назад 
        Player -> Игра: Нажатие кнопки вперед
        Игра -> Танк: Перемещение танка вперед
        Player -> Игра: Нажатие кнопки назад
        Игра -> Танк: Перемещение танка назад
    else Поворот танка кнопками вправо или лево
        Player -> Игра: Нажатие кнопки вправо
        Игра -> Танк: Поворот танка вправо
        Player -> Игра: Нажатие кнопки влево
        Игра -> Танк: Поворот танка влево
    end
end

Танк -> Обьект: Касание обьекта

Обьект -> Игра: Обработка столкновений

Player -> Танк: Кнопка "Выстрел"
Танк -> Игра: Генерация события "Выстрел"

    alt Попадание снаряда по врагу
        Игра -> Снаряд ++: Генерация обьекта "Снаряд"
        Снаряд -> Враг: Попадание по врагу
        Игра -> Обьект: создание обьекта "Взрыв"
        Игра -> Снаряд: Уничтожение обьекта "Снаряд"
        destroy Снаряд
        Игра -> Враг: Уничтожение обьекта враг
        destroy Враг
        Игра -> Обьект: Создание обьекта "Уничтоженный танк"
    else Попадание по другому обьекту
        Игра -> Снаряд ++: Генерация обьекта "Снаряд"
        Снаряд -> Обьект: Попадание по обьекту
        Игра -> Обьект: создание обьекта "Взрыв"
        Игра -> Снаряд: Уничтожение обьекта "Снаряд"
        destroy Снаряд
   else Попадание снаряда по врагу
        Игра -> Снаряд ++: Генерация обьекта "Снаряд"
        Снаряд -> Танк: Попадание по танку
        Игра -> Обьект: создание обьекта "Взрыв"
        Игра -> Снаряд: Уничтожение обьекта "Снаряд"
        destroy Снаряд
        Игра -> Игра: Уменьшение жизней танка
    end

alt Танк убит
    Игра-> Танк: Уничтожение танка
    destroy Танк
end

alt Игра проиграна
    Игра -> Игра: перезапуск уровня
else Игра выйграна
    Игра -> Игра: Генерация действия "Игра выйграна"
    Игра -> Игра: Показ окна победы
end

Обьект --
Игра -> Player: return
Игра --

@enduml